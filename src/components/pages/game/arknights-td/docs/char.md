# 角色与战斗机制设计文档

本文件用于记录 Arknights-TD 的角色设计与核心战斗机制方案。

---

## 1. 核心战斗机制：统一伤害与异常积蓄

### 1.1 统一伤害模型 (Unified Damage)
- **伤害计算**: 所有攻击造成的伤害统一计算。
- **防御机制**: 敌人拥有统一的 `DamageReduction` (减伤率)。
- **设计目的**: 简化数值验证，将策略重心转移到“异常积蓄”上。

### 1.2 异常积蓄体系 (Anomaly Buildup System)
这是本游戏的核心机制。异常积蓄不仅仅是一个负面状态条，更是一个**“战斗开关”**。它将战斗流程严格划分为两个阶段：**积蓄期 (Setup)** 和 **爆发期 (Payoff)**。

#### 阶段一：异常触发前 - 点火与积蓄 (Pre-trigger: Ignition)
此阶段的核心目标是**“快速填满积蓄槽”**。我们不鼓励在此阶段通过积蓄本身造成大量HP伤害，而是鼓励利用各种机制来操控进度条。
- **点火效率 (Ignition Efficiency)**: 角色自身提升积蓄速度，或辅助角色提升队友的积蓄效率（“拐”）。
- **扩散 (Diffusion)**: 攻击某单位时，将其身上的积蓄进度按比例“传染”给周围敌人，实现AOE点火。
- **聚爆 (Implosion)**: 吸取大范围内所有敌人的当前积蓄值，汇聚到一点或自身，瞬间填满积蓄槽或触发特殊效果。

#### 阶段二：异常触发后 - 爆发与利用 (Post-trigger: Break)
当积蓄槽填满（阈值如 1000点），敌人进入**【异常爆发】(Break)** 状态。这是真正的**“输出窗口期”**。
- **趁火打劫 (Punish)**: 很多角色的技能机制是“对处于异常状态的敌人伤害大幅提升”。
- **状态维持 (Extension)**: 通过特定技能延长敌人【爆发】状态的持续时间，从而延长输出窗口。
- **爆发效果**: 如下表所示，每种积蓄填满后会触发特定的Break效果。

#### 积蓄对抗模型 (Buildup Calculation)
引入类似“攻击力 vs 防御力”的对抗计算，参考 **League of Legends** 的护甲减伤逻辑：
- **异常效能 (Potency)**: 角色施加异常的能力。由 `基础积蓄值` 配合 `异常增幅(Amplification)` 决定。
- **异常抗性 (Resistance)**: 敌人对该类异常的抵抗值（相当于“护甲”）。

**计算公式**:
> **实际积蓄值 = 异常效能 * (100 / (100 + 异常抗性))**

*设计意图*:
- 这是一个**“收益递减”**模型。抗性越高，积蓄效率越低，但不会完全归零。
- 与减法公式不同，这种算法保证了高抗性敌人仍然会受到少量积蓄，避免了“完全抛光”的情况，同时也让抗性穿透属性更有价值。

### 1.3 八大积蓄赛道 (The 8 Tracks)

| 赛道名称 | 积蓄颜色 | 爆发效果 (Break Effect) | 定位 |
| :--- | :--- | :--- | :--- |
| **燃烧 (BURN)** | 🔴 红色 | **【灼烧】**: 持续一段时间受到普通伤害（DOT）。伤害受攻击者面板加成，但会被敌人减伤率抵消。 | 基础输出、清杂 |
| **冻结 (FREEZE)** | 🔵 蓝色 | **【冰封】**: 敌人完全停止行动 X 秒。期间无法被阻挡，如同雕塑。 | 强控、拖延 |
| **腐蚀 (CORROSION)** | 🟢 绿色 | **【腐坏】**: 持续一段时间受到**真实伤害**。无视敌人减伤率直接扣血。 | 攻坚、打高防怪 |
| **凋亡 (APOPTOSIS)** | ⚫ 黑色 | **【衰变】**: 瞬间扣除敌人 **当前生命值** 的一定百分比（如 10%）。<br>**限制**: 当敌人生命值低于 5% 时失效。 | 削血、反坦克 |
| **恐慌 (PANIC)** | 🟠 橙色 | **【溃乱】**: 敌人进入“虚弱”状态（受到的所有伤害提升），并且**随机游走**（失去目标，乱跑）。 | 干扰、增伤 |
| **沉默 (SILENCE)** | ⚪ 白色 | **【禁言】**: 敌人无法释放任何技能（如召唤、自爆、加血）。 | 对策、克制特殊怪 |
| **迟缓 (SLOTH)** | 🟤 棕色 | **【时缓】**: 敌人的时间流速变慢。移动速度大幅降低，攻击/施法前摇大幅延长。 | 软控、风筝 |
| **麻痹 (PARALYSIS)** | ⚡ 黄色 | **【惊雷】**: 瞬间**定身**并**打断**当前动作（施法/攻击）。随后会间歇性地再次触发短暂定身。 | 打断、硬控 |

### 1.4 场景异常互动 (Environmental Interaction)
异常体系不仅作用于敌方单位，也能作用于战场环境（地块）。
- **地块积蓄 (Tile Buildup)**: 角色技能可以对地块施加持续的异常效果（如“燃烧地面”、“带电水坑”）。
- **持续点火 (Continuous Ignition)**: 当敌人经过或停留在受影响的地块上时，会持续增加对应的异常积蓄值。
- **战术价值**: 利用地形铺设“异常带”，在敌人接触防线前完成积蓄（预热），或用于封锁关键路径。

---

## 2. 角色设计方案 (Drafts)

### 2.1 纵火者 (Arsonist)
- **职业**: `CASTER` (术师)
- **赛道**: **【燃烧】(BURN)**
- **机制**: 普攻附带高额燃烧积蓄。**技能可点燃目标脚下的地块，形成持续燃烧区域，对经过的敌人持续施加燃烧积蓄。**
- **战术意图**: 给敌人挂上 DOT，配合其他角色的输出。

### 2.2 冰霜射手 (Frost Archer)
- **职业**: `SNIPER` (射手)
- **赛道**: **【冻结】(FREEZE)**
- **机制**: 高攻速快速叠满冰冻条。
- **战术意图**: 控住关键的高速敌人。

### 2.3 绝命毒师 (Corruptor)
- **职业**: `CASTER` (术师)
- **赛道**: **【腐蚀】(CORROSION)**
- **机制**: 攻击附带腐蚀积蓄。
- **战术意图**: 专门用来处理防御力极高的重甲单位，利用真伤绕过防御。

### 2.4 送葬人 (Reaper)
- **职业**: `GUARD` (近卫)
- **赛道**: **【凋亡】(APOPTOSIS)**
- **机制**: 每一击都试图触发凋亡。
- **战术意图**: 专门削减 BOSS 或超高血量敌人的血线，但在收割残血时乏力。

### 2.5 惊吓盒子 (Jack-in-the-box)
- **职业**: `TRAPPER` (特种)
- **赛道**: **【恐慌】(PANIC)**
- **机制**: 放置陷阱，触发后瞬间填满恐慌条。
- **战术意图**: 把冲进阵线的敌人吓跑（乱走），同时挂上易伤让队友输出。

### 2.6 抹除者 (Silencer)
- **职业**: `SUPPORT` (辅助)
- **赛道**: **【沉默】(SILENCE)**
- **机制**: 攻击不会造成多少伤害，但能封印敌人的特殊能力。
- **战术意图**: 对付自爆虫或召唤师。

### 2.7 时钟 (Clockwork)
- **职业**: `SUPPORTER` (辅助)
- **赛道**: **【迟缓】(SLOTH)**
- **机制**: 攻击让敌人的时间变慢。
- **战术意图**: 并非完全停止，而是让一切变慢，适合风筝战术。

### 2.8 雷神 (Thunder)
- **职业**: `GUARD` (近卫)
- **赛道**: **【麻痹】(PARALYSIS)**
- **机制**: 攻击概率打断敌人动作。
- **战术意图**: 专门打断敌人的蓄力技能或高伤害普攻。

---

## 3. 数值与抗性逻辑

每个敌人对这 8 种积蓄都有独立的抗性。
- **Boss** 通常对 **凋亡** 有上限保护。
- **机械单位** 对 **恐慌** 和 **毒素(腐蚀)** 免疫。
- **高韧性单位** 对 **冻结** 和 **麻痹** 有高抗性（积蓄效率低）。
